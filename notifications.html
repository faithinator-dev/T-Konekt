<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notifications - FaithBook</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="fb-style.css">
    <link rel="shortcut icon" href="t -konnect.png" type="image/x-icon">
</head>
<body>
    <!-- Top Navigation -->
    <nav class="navbar navbar-expand navbar-light bg-white border-bottom fixed-top shadow-sm">
        <div class="container-fluid">
            <div class="d-flex align-items-center">
                <a class="navbar-brand fw-bold fs-4 text-white d-flex align-items-center me-3" href="home.html">
                    <img src="icons/logo.png" alt="T-Konekt" style="height: 40px; margin-right: 8px;">
                    T-Konekt
                </a>
                <div class="input-group search-box">
                    <span class="input-group-text bg-light border-0"><i class="bi bi-search"></i></span>
                    <input type="search" class="form-control bg-light border-0" placeholder="Search FaithBook">
                </div>
            </div>
            
            <ul class="navbar-nav mx-auto d-none d-lg-flex">
                <li class="nav-item">
                    <a class="nav-link" href="home.html"><i class="bi bi-house-door-fill fs-4"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="friends.html"><i class="bi bi-people fs-4"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="watch.html"><i class="bi bi-play-btn fs-4"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="groups.html"><i class="bi bi-collection fs-4"></i></a>
                </li>
            </ul>
            
            <div class="d-flex align-items-center gap-2">
                <button class="btn btn-light rounded-circle p-2"><i class="bi bi-grid-3x3-gap-fill"></i></button>
                <button class="btn btn-light rounded-circle p-2"><i class="bi bi-chat-dots-fill"></i></button>
                <button class="btn btn-light rounded-circle p-2 active position-relative">
                    <i class="bi bi-bell-fill"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="notifCount">
                        5
                    </span>
                </button>
                <div class="dropdown">
                    <button class="btn p-0" data-bs-toggle="dropdown">
                        <img src="https://via.placeholder.com/40" class="rounded-circle" alt="Profile">
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="profile.html"><i class="bi bi-person-circle me-2"></i> Profile</a></li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i> Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="login.html"><i class="bi bi-box-arrow-right me-2"></i> Log Out</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container main-content" style="padding-top: 80px;">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-sm">
                    <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
                        <h4 class="mb-0 fw-bold">Notifications</h4>
                        <div class="btn-group btn-group-sm" role="group">
                            <button type="button" class="btn btn-outline-primary active" onclick="filterNotifications('all')">All</button>
                            <button type="button" class="btn btn-outline-primary" onclick="filterNotifications('unread')">Unread</button>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div id="notificationsList">
                            <!-- Notifications will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="mockData.js"></script>
    <script>
        // Initialize notifications in localStorage if not exists
        if (!localStorage.getItem('userNotifications')) {
            const initialNotifications = [
                {
                    id: 1,
                    type: 'like',
                    message: '<strong>Sarah Johnson</strong> liked your post',
                    time: '5 minutes ago',
                    read: false,
                    icon: 'bi-hand-thumbs-up-fill text-primary',
                    link: 'home.html'
                },
                {
                    id: 2,
                    type: 'comment',
                    message: '<strong>Michael Chen</strong> commented on your photo',
                    time: '15 minutes ago',
                    read: false,
                    icon: 'bi-chat-fill text-success',
                    link: 'home.html'
                },
                {
                    id: 3,
                    type: 'friend',
                    message: '<strong>Emily Davis</strong> accepted your friend request',
                    time: '1 hour ago',
                    read: false,
                    icon: 'bi-people-fill text-info',
                    link: 'friends.html'
                },
                {
                    id: 4,
                    type: 'group',
                    message: '<strong>Alex Martinez</strong> invited you to join <strong>Faith Community</strong>',
                    time: '2 hours ago',
                    read: true,
                    icon: 'bi-collection-fill text-warning',
                    link: 'groups.html'
                },
                {
                    id: 5,
                    type: 'admin',
                    message: '<strong>System Update:</strong> We\'ve made some improvements to enhance your experience',
                    time: '3 hours ago',
                    read: true,
                    icon: 'bi-megaphone-fill text-danger',
                    link: '#'
                }
            ];
            localStorage.setItem('userNotifications', JSON.stringify(initialNotifications));
        }

        // Load notifications
        function loadNotifications(filter = 'all') {
            const notifications = JSON.parse(localStorage.getItem('userNotifications')) || [];
            const filteredNotifications = filter === 'unread' 
                ? notifications.filter(n => !n.read) 
                : notifications;

            const notificationsList = document.getElementById('notificationsList');
            
            if (filteredNotifications.length === 0) {
                notificationsList.innerHTML = `
                    <div class="text-center py-5 text-muted">
                        <i class="bi bi-bell fs-1"></i>
                        <p class="mt-3">No notifications</p>
                    </div>
                `;
                return;
            }

            notificationsList.innerHTML = filteredNotifications.map(notif => `
                <div class="notification-item p-3 border-bottom ${notif.read ? '' : 'bg-light'}" data-id="${notif.id}">
                    <div class="d-flex">
                        <div class="me-3">
                            <div class="rounded-circle bg-white p-2 shadow-sm">
                                <i class="bi ${notif.icon} fs-5"></i>
                            </div>
                        </div>
                        <div class="flex-grow-1">
                            <p class="mb-1">${notif.message}</p>
                            <small class="text-muted">${notif.time}</small>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-light rounded-circle" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#" onclick="markAsRead(${notif.id})">
                                    <i class="bi bi-check2 me-2"></i>Mark as read
                                </a></li>
                                <li><a class="dropdown-item" href="#" onclick="deleteNotification(${notif.id})">
                                    <i class="bi bi-trash me-2"></i>Delete
                                </a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            `).join('');

            // Update notification count
            const unreadCount = notifications.filter(n => !n.read).length;
            document.getElementById('notifCount').textContent = unreadCount;
            if (unreadCount === 0) {
                document.getElementById('notifCount').style.display = 'none';
            }
        }

        function filterNotifications(filter) {
            // Update active button
            document.querySelectorAll('.btn-group button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadNotifications(filter);
        }

        function markAsRead(id) {
            const notifications = JSON.parse(localStorage.getItem('userNotifications')) || [];
            const notification = notifications.find(n => n.id === id);
            if (notification) {
                notification.read = true;
                localStorage.setItem('userNotifications', JSON.stringify(notifications));
                loadNotifications();
            }
        }

        function deleteNotification(id) {
            let notifications = JSON.parse(localStorage.getItem('userNotifications')) || [];
            notifications = notifications.filter(n => n.id !== id);
            localStorage.setItem('userNotifications', JSON.stringify(notifications));
            loadNotifications();
        }

        // Mark all as read when page loads
        setTimeout(() => {
            const notifications = JSON.parse(localStorage.getItem('userNotifications')) || [];
            notifications.forEach(n => n.read = true);
            localStorage.setItem('userNotifications', JSON.stringify(notifications));
        }, 2000);

        // Load notifications on page load
        loadNotifications();
    </script>

    <style>
        .notification-item {
            transition: background-color 0.2s;
            cursor: pointer;
        }
        
        .notification-item:hover {
            background-color: #f8f9fa !important;
        }
    </style>
</body>
</html>
